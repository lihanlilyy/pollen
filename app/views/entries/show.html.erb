<!DOCTYPE html>
        <head>
            <title><%= full_title(yield(:title)) %></title>
        </head>

    <% provide(:title, @entry.title) %>
    <div id="row-entry">
        <aside id="left-scroll">
            <section class="w3-container">
                <br>
                <br>
                <div class="tiny-avatar">
                    <%= avatar_for(@entry.journal.user) %>
                </div>
                <div class="entry-title">
                    <%= @entry.title %>
                    <% if @entry.resolved %>
                        <svg width="1em" height="1em" id="resolved-icon" data-toggle="tooltip" title="Entry has been marked resolved by author" data-container="body" viewBox="0 0 16 16" class="bi bi-check-circle-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                        </svg>
                    <% end %>
                </div>
                <div class="entry-particulars">
                    entry by
                    <%=  link_to "#{@entry.journal.user.firstname} #{@entry.journal.user.lastname}", @entry.journal.user%>
                    Â·   
                    posted <%= time_ago_in_words(@entry.created_at) %> ago
                    <br>
                    <br>
                </div>
                <div class="entry-content">
                    <%= @entry.content %>
                    <br>
                    <br>
                </div>
                <% pre_like = @entry.entrylikes.find { |like| like.user_id == current_user.id} %>
                <div class="entry-stats">
                <% if pre_like %>
                    <%= link_to entry_entrylike_path(@entry, pre_like), method: :delete do %>
                        <svg width="1em" height="1em" viewBox="0 0 16 16" id = "unlike-heart" data-toggle="tooltip" title="unlike" data-container="body" class="bi bi-heart-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                    <% end %>
                <% else %>
                    <%= link_to entry_entrylikes_path(@entry), method: :entry do %>
                        <svg width="1em" height="1em" viewBox="0 0 16 16" id = "like-heart" data-toggle="tooltip" title="like" data-container="body" class="bi bi-heart-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                        </svg>
                    <% end %>
                <% end %>
                    <%= @entry.entrylikes.count %>  
                    <svg width="1em" height="1em" id = "likes" data-toggle="tooltip" title="comments" data-container="body" viewBox="0 0 16 16" class="bi bi-chat-left-dots-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4.414a1 1 0 0 0-.707.293L.854 15.146A.5.5 0 0 1 0 14.793V2zm5 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                    <%= @entry.corrections.count %>
                    <svg width="1em" height="1em" id = "likes" data-toggle="tooltip" title="views" data-container="body" viewBox="0 0 16 16" class="bi bi-eye-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                        <path fill-rule="evenodd" d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                    </svg>
                    <%= @entry.hits %>
                </div>
                <div class="entry-particulars">
                    <%= link_to "go to journal", @entry.journal %> 
                    <% if current_user == @entry.journal.user %>
                        / 
                        <%= link_to "edit", edit_entry_path(@entry) %> 
                        /
                        <% if @entry.resolved == false %>
                            <%= link_to "mark as resolved", markresolved_entry_path %>
                        <% else %>
                            <%= link_to "mark as unresolved", markresolved_entry_path %>
                        <% end %>
                        /
                        <%= link_to "delete", @entry, method: :delete,
                        data: { confirm: "This entry will be permanently deleted." } %>
                    <%end%>
                </div>
            </section>
        </aside>
        <div id="right-scroll">
        <br>
            <% if current_user != @entry.journal.user %>
                <section>
                    <%= render 'shared/correction_form' %>
                </section>
                <br>
                <br>
            <%end%>
            <% if @entry.corrections.count > 0 %>
                <h3>Corrections (<%= @entry.corrections.count %>)</h3>
                <ol class="corrections">
                    <%= render @corrections %>
                </ol>
            <% else %>
                <div class = "no-corrections">
                    <br>
                    No corrections yet.
                </div>
            <% end %>
        </div>
    </div>
</html>